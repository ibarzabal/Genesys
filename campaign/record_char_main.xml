<?xml version="1.0" encoding="iso-8859-1"?>

	<!--
	  Please see the license.html file included with this distribution for
	  attribution and copyright information.
	-->

	<root>
		<windowclass name="charsheet_main">
			<script file="campaign/scripts/char_main.lua" />
			<sheetdata>

<!-- CHARACTERISTICS -->
			<frame_char name="main_characteristics">
				<bounds>14,15,351,87</bounds>
			</frame_char>
			<sheetframetitle name="main_characteristics_title">
				<anchored>
					<to>main_characteristics</to>
				</anchored>
				<static>Characteristics</static>
			</sheetframetitle>

			<!-- BRAWN -->
			<sheetcharacteristicvalue name="main_characteristics_brawn_current" source="brawn.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>17,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_brawn_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_brawn_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_brawn_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Brawn</static>
			</sheettitle>

			<!-- AGILITY-->
			<sheetcharacteristicvalue name="main_characteristics_agility_current" source="agility.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>73,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_agility_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_agility_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_agility_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Agility</static>
			</sheettitle>

			<!-- INTELLECT-->
			<sheetcharacteristicvalue name="main_characteristics_intellect_current" source="intellect.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>129,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_intellect_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_intellect_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_intellect_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Intellect</static>
			</sheettitle>

			<!-- CUNNING-->
			<sheetcharacteristicvalue name="main_characteristics_cunning_current" source="cunning.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>185,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_cunning_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_cunning_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_cunning_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Cunning</static>
			</sheettitle>

			<!-- WILLPOWER-->
			<sheetcharacteristicvalue name="main_characteristics_willpower_current" source="willpower.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>241,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_willpower_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_willpower_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_willpower_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Willpower</static>
			</sheettitle>

			<!-- PRESENCE-->
			<sheetcharacteristicvalue name="main_characteristics_presence_current" source="presence.current">
				<anchored>
					<to>main_characteristics</to>
					<offset>297,24</offset>
				</anchored>
			</sheetcharacteristicvalue>
			<sheettitle>
				<anchored>
					<top>
						<parent>main_characteristics_presence_current</parent>
						<anchor>bottom</anchor>
						<offset>3</offset>
					</top>
					<left>
						<parent>main_characteristics_presence_current</parent>
						<anchor>left</anchor>
						<offset>-20</offset>
					</left>
					<right>
						<parent>main_characteristics_presence_current</parent>
						<anchor>right</anchor>
						<offset>20</offset>
					</right>
					<size>
						<height>20</height>
					</size>
				</anchored>
				<center />
				<static>Presence</static>
			</sheettitle>



<!-- INITIATIVE -->
			<sheetframe name="combat_init">
			<!--<bounds>355,2,128,86</bounds>-->
			<bounds>363,15,120,87</bounds>
			</sheetframe>
			<sheetframetitle name="combat_init_title">
				<anchored>
					<to>combat_init</to>
				</anchored>
				<static>Initiative</static>
			</sheetframetitle>

			<!-- Cool -->
			<sheetlabel name="combat_init_cool">
				<anchored>
					<to>combat_init</to>
					<offset>34,27</offset>
					<size>
						<width>50</width>
					</size>
				</anchored>
				<static>Cool</static>
			</sheetlabel>

			<initdicepool name="combat_init_cool_btn">
				<anchored>
					<to>combat_init</to>
					<offset>85,27</offset>
					<position>insidetopleft</position>
					<size>
						<width>18</width>
						<height>14</height>
					</size>
				</anchored>
				<!--<bounds>118,26,10,10</bounds>-->
			</initdicepool>

			<!-- Vigilance -->
			<sheetlabel name = "combat_init_vigilance">
				<anchored>
					<to>combat_init</to>
					<offset>20,54</offset>
					<size>
						<width>64</width>
					</size>
				</anchored>
				<static>Vigilance</static>
			</sheetlabel>

			<initdicepool name="combat_init_vigilance_btn">
				<anchored>
					<to>combat_init</to>
					<offset>85,54</offset>
					<position>insidetopleft</position>
					<size>
						<width>18</width>
						<height>14</height>
					</size>
				</anchored>
				<!--<bounds>118,26,10,10</bounds>-->
			</initdicepool>


<!-- EXPERIENCE -->
			<sheetframe name="main_experience">
				<bounds>363,97,121,94</bounds>
			</sheetframe>
			<sheetframetitle name="main_experience_title">
				<anchored>
					<to>main_experience</to>
				</anchored>
				<static>Experience</static>
			</sheetframetitle>

			<!-- TOTAL -->
			<sheetlabel>
				<anchored>
					<to>main_experience</to>
					<offset>13,22</offset>
					<size>
						<width>64</width>
					</size>
				</anchored>
				<static>Total</static>
			</sheetlabel>
			<sheetnumberfield name="main_experience_total" source="experience.total">
				<anchored>
					<to>main_experience</to>
					<offset>83,21</offset>
					<size>
						<width>30</width>
					</size>
				</anchored>
				<tabtarget>
					<next>main_experience_spent</next>
				</tabtarget>
			</sheetnumberfield>

			<!-- SPENT -->
			<sheetlabel>
				<anchored>
					<to>main_experience</to>
					<offset>13,42</offset>
					<size>
						<width>64</width>
					</size>
				</anchored>
				<static>Spent</static>
			</sheetlabel>
			<sheetnumberfield name="main_experience_spent" source="experience.spent">
				<anchored>
					<to>main_experience</to>
					<offset>83,41</offset>
					<size>
						<width>30</width>
					</size>
				</anchored>
				<tabtarget>
					<next>main_fortune_maximum</next>
					<prev>main_experience_total</prev>
				</tabtarget>
				<script>
					local totalnode = nil;

					function onValueChanged()
						local totalvalue = totalnode.getValue();
						local value = getValue();
						if value == 0 then
							setColor(zerocolor[1]);
						else
							setColor(color[1]);
						end
						if 0 > value then
							setValue(0);
						end
						if value > totalvalue then
							setValue(totalvalue);
						end
					end

					function onInit()
						local windownode = window.getDatabaseNode();
						totalnode = windownode.getChild("experience.total");
						onValueChanged();
					end
				</script>
			</sheetnumberfield>

			<!-- REMAINING -->
			<sheetlabel>
				<anchored>
					<to>main_experience</to>
					<offset>13,62</offset>
					<size>
						<width>64</width>
					</size>
				</anchored>
				<static>Remaining</static>
			</sheetlabel>
			<sheetnumbercontrol>
				<anchored>
					<to>main_experience</to>
					<offset>83,61</offset>
					<size>
						<width>30</width>
					</size>
				</anchored>
				<disabled />
				<script>
					local totalnode = nil;
					local spentnode = nil;

					function onUpdate(source)
						local totalvalue = totalnode.getValue();
						local spentvalue = spentnode.getValue();
						setValue(totalvalue - spentvalue);
						onValueChanged();
					end

					function onInit()
						local windownode = window.getDatabaseNode();
						totalnode = windownode.getChild("experience.total");
						totalnode.onUpdate = onUpdate;
						spentnode = windownode.getChild("experience.spent");
						spentnode.onUpdate = onUpdate;
						onUpdate(nil);
						onValueChanged();
					end
				</script>
			</sheetnumbercontrol>

			<!-- TALENTS -->
						<frame_char name="talents_talents">
							<!--<bounds>12,81,351,390</bounds>-->
							<bounds>14,97,350,-5</bounds>
						</frame_char>
						<sheetframetitle name="talents_talents_title">
							<anchored>
								<to>talents_talents</to>
							</anchored>
							<static>Abilities, Talents, Critical Injuries</static>
						</sheetframetitle>

						<!-- Talents -->
						<basewindowlist name="talents_talents_talents">
							<class>empty</class>
							<skipempty />
							<anchored>
								<left>
									<parent>talents_talents</parent>
									<anchor>left</anchor>
									<offset>8</offset>
								</left>
								<right>
									<parent>talents_talents</parent>
									<anchor>right</anchor>
									<offset>-15</offset>
								</right>
								<top>
									<parent>talents_talents</parent>
									<anchor>top</anchor>
									<offset>21</offset>
								</top>
								<bottom>
									<parent>talents_talents</parent>
									<anchor>bottom</anchor>
									<offset>-21</offset>
								</bottom>
							</anchored>
							<script>
								function onInit()
									createWindowWithClass("charsheet_talents_abilities", window.getDatabaseNode());
									createWindowWithClass("charsheet_talents_talents", window.getDatabaseNode());
									createWindowWithClass("charsheet_combat_criticals", window.getDatabaseNode());
									createWindowWithClass("charsheet_combat_conditions", window.getDatabaseNode());
								end
							</script>
						</basewindowlist>
						<scrollbar>
							<anchored>
								<to>talents_talents_talents</to>
								<offset>-1,-2</offset>
							</anchored>
							<target>talents_talents_talents</target>
						</scrollbar>




				</sheetdata>
			</windowclass>



	</root>
